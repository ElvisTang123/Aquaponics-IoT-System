<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Water_Level</title>
    <style>
      html {
        height: 100%;
      }
      body {
        background-image: url("img/Background01.PNG");
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: center;
        background-size: cover;
        background-color: #9fc6ff;
      }
    </style>
  </head>
  <body>
    <script>
      var url = "http://10.0.0.13/Wlevel";

      function update(d) {
        txs = document.querySelectorAll("text");
        txs[0].innerHTML = `${d}%`;
        phs = document.querySelectorAll("path");
        phs[1].setAttribute("stroke-dasharray", `${d} 100`);
      }
    </script>
    <script>
      //--- AJAX
      function Ajax_get(url) {
        console.log(url);
        var xhttp = new XMLHttpRequest();

        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            data = this.responseText;
            console.log(data);
            update(data);
          }
        };
        xhttp.open("GET", url, true);
        xhttp.send();
      }
    </script>

    <a href="index.html"><img src="img/MenuButton.png" width="50px" /></a>
    <div align="center" valign="center">
      <svg
        style="width: 100%"
        width="1600"
        height="120"
        viewBox="0 0 1600 120"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill="#1AF"
          d="M 1600 164.648 V 66.4428 C 1600 66.4428 1198.64 30.0805 758.025 33.6272 C 317.412 37.1743 0 43.9593 0 43.9593 V 164.648 H 1600 Z"
        >
          <animate
            repeatCount="indefinite"
            fill="freeze"
            attributeName="d"
            dur="4s"
            values="M1600 156V73.5801C1600 73.5801 1279 -53.8561 800 26.7048C321 107.266 0 3.82945 0 3.82945V156H1600Z;
            M1600 157V80.5802C1600 80.5802 1202 105 800 27.7048C398 -49.5902 0 64.8295 0 64.8295V157H1600Z;
            M1600 180.106V53.6857C1600 53.6857 1055 180.106 683 46.0001C311 -88.1054 0 115.686 0 115.686V180.106H1600Z;
            M1600 156V73.5801C1600 73.5801 1279 -53.8561 800 26.7048C321 107.266 0 3.82945 0 3.82945V156H1600Z"
          ></animate>
        </path>
      </svg>

      <svg id="reservoir1" width="205" height="170">
        <g clip-path="url(#clipWavereservoir1)">
          <circle
            cx="100"
            cy="85"
            r="80"
            stroke="#1AF"
            stroke-width="5"
            fill="none"
          />
          <circle cx="100" cy="85" r="72" style="fill: #1af" />

          <text
            class="liquidFillGaugeText"
            text-anchor="middle"
            font-size="32.5px"
            transform="translate(100, 95)"
            style="fill: rgb(164, 220, 248)"
          ></text>
        </g>
      </svg>

      <!--<div class="updateAt">
        <font face="微軟正黑體">
          <h4>更新時間：2021-08-09(8時)</h4>
        </font>
      </div>-->
      <section>
        <button
          href="#"
          class="btn"
          align="center"
          style="display: block; margin: auto"
          onclick="Ajax_get(url)"
        >
          <h1>Refresh</h1>
        </button>
      </section>
      <section id="i" />
    </div>
  </body>
</html>
